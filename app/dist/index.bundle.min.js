webpackJsonp([0],{15:function(n,t,e){var r=e(2),c=e(3),o=e(12);n.exports={view:function(n){return c("li",c("span",c("input",{type:"text",value:o(n.attrs.amount()).format("0 0.00"),onchange:function(t){n.attrs.amount(this.value),n.attrs.onchangeamount(t,n.attrs.index)}})),c("span",c("select",{value:n.attrs.currency(),onchange:function(t){n.attrs.currency(this.value),n.attrs.onchangecurrency(t,n.attrs.index)}},r(App.currencies,function(n,t){return c("option",{value:t},n+" ("+t+")")}))),c("span",c("span",c("button",{class:"pure-button",onclick:function(){App.removeItem(n.attrs.index)}},"X"))))}}},27:function(n,t,e){(function(n){function t(t,e){function r(){if(!arguments.length)return c;c=arguments[0],e&&n.nextTick(e,c)}var c=t;return r}function r(t){App.default_currency=l.base,App.read(),n.nextTick(t)}window.Promise||(window.Promise=e(10));var c=e(2),o=e(7),u=e(8),a=e(6),p=e(5),i=e(3),l=e(9),s=e(11),f=e(15),m=["USD","EUR","GBP"];window.App={default_currency:null,currencies:null,collection:null,last_from_index:null,read:function(){var n,e=s.get("collection");App.collection=c(o(e)?m:e,function(e,r){return r||(n=e),{amount:t(l(1).from(n).to(e)),currency:t(e,App.write)}}),App.last_from_index=0},write:function(){s.set("collection",c(App.collection,function(n){return n.currency()}))},addItem:function(){var e=App.collection[App.last_from_index];App.collection.push({amount:t(l(e?e.amount():1).from(e?e.currency():App.default_currency).to(App.default_currency)),currency:t(App.default_currency,App.write)}),n.nextTick(App.write)},removeItem:function(t){App.collection.splice(t,1),n.nextTick(App.write)},getName:function(n){return App.currencies[n]||"Unknown"},updateRatesTable:function(){return Promise.all([i.request({url:"//openexchangerates.org/api/latest.json?app_id=412c7ea5a585496ca593e6697ce22d9a"}).then(function(n){return l.rates=n.rates,l.base=n.base,n}),i.request({url:"//openexchangerates.org/api/currencies.json"}).then(function(n){return App.currencies=n,n})])},convert:function(n,t,e){e instanceof Array||(e=[e]),e=u(e);for(var r,o,p=c(e,function(e){return{currency:e,amount:l(n).from(t).to(e)}}),i=App.collection.length-1;i>=0;i--)r=App.collection[i],(o=a(p,["currency",r.currency()]))&&r.amount(o.amount)},changeAmount:function(n,t){var e=App.collection[t],r=c(p(App.collection,function(n,e){return e!==t}),function(n){return n.currency()});App.convert(e.amount(),e.currency(),r),App.last_from_index=t},changeCurrency:function(n){App.changeAmount(n,App.last_from_index)}},window.onload=function(){App.updateRatesTable().then(function(){r(function(n){n||i.mount(document.getElementById("root"),{view:function(){return i("div#converter",{class:"pure-form"},i("ul",c(App.collection,function(n,t){return i(f,{index:t,amount:n.amount,currency:n.currency,onchangeamount:App.changeAmount,onchangecurrency:App.changeCurrency})})),i("button",{class:"pure-button pure-button-primary"},"Convert"),i("button",{class:"pure-button",onclick:App.addItem},"Add"))}})})})}}).call(t,e(13))}},[27]);